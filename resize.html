<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tool Resize ·∫¢nh Nhanh</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #1e1e1e; color: #d4d4d4; padding: 20px; text-align: center; }
        .container { max-width: 600px; margin: 0 auto; background: #252526; padding: 30px; border-radius: 10px; border: 1px solid #3e3e42; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
        h1 { color: #4ec9b0; margin-top: 0; }
        
        /* Input Styles */
        .control-group { margin-bottom: 20px; text-align: left; }
        label { display: block; margin-bottom: 5px; color: #ce9178; font-weight: bold; }
        input[type="number"], input[type="file"] { width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #555; background: #333; color: white; box-sizing: border-box; }
        input[type="range"] { width: 100%; }
        
        /* Grid cho k√≠ch th∆∞·ªõc */
        .size-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }

        /* Buttons */
        .btn { border: none; padding: 12px 25px; border-radius: 5px; font-size: 16px; cursor: pointer; color: white; font-weight: bold; width: 100%; margin-top: 10px; transition: 0.3s; }
        .btn-resize { background-color: #0e639c; }
        .btn-resize:hover { background-color: #1177bb; }
        .btn-download { background-color: #4caf50; display: none; text-decoration: none; display: inline-block; box-sizing: border-box;}
        .btn-download:hover { background-color: #45a049; }
        .btn-back { background-color: #444; margin-bottom: 20px; width: auto; display: inline-block; padding: 8px 15px; font-size: 14px;}

        /* Preview Image */
        #previewContainer { margin-top: 20px; border: 2px dashed #444; min-height: 150px; display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative;}
        img { max-width: 100%; display: none; }
        .info-text { font-size: 14px; color: #888; margin-top: 5px; }
    </style>
</head>
<body>

    <a href="index.html" class="btn btn-back">‚¨Ö Quay l·∫°i Trang ch·ªß</a>

    <div class="container">
        <h1>üñºÔ∏è C√îNG C·ª§ RESIZE ·∫¢NH</h1>
        
        <div class="control-group">
            <label>1. Ch·ªçn ·∫£nh c·∫ßn s·ª≠a:</label>
            <input type="file" id="imageInput" accept="image/*">
        </div>

        <div class="size-grid">
            <div class="control-group">
                <label>Chi·ªÅu R·ªông (px):</label>
                <input type="number" id="widthInput" placeholder="V√≠ d·ª•: 1920">
            </div>
            <div class="control-group">
                <label>Chi·ªÅu Cao (px):</label>
                <input type="number" id="heightInput" placeholder="T·ª± ƒë·ªông t√≠nh">
            </div>
        </div>

        <div class="control-group">
            <label>Ch·∫•t l∆∞·ª£ng ·∫£nh (N√©n): <span id="qualityVal">90%</span></label>
            <input type="range" id="qualityInput" min="0.1" max="1.0" step="0.1" value="0.9">
        </div>

        <button class="btn btn-resize" onclick="resizeImage()">‚ö° RESIZE NGAY</button>

        <div id="previewContainer">
            <p id="placeholderText" style="color: #666;">·∫¢nh xem tr∆∞·ªõc s·∫Ω hi·ªán ·ªü ƒë√¢y</p>
            <img id="previewImg" alt="Preview">
        </div>
        <p id="sizeInfo" class="info-text"></p>

        <a id="downloadLink" class="btn btn-download" style="display: none;">‚¨á T·∫¢I ·∫¢NH V·ªÄ M√ÅY</a>
    </div>

    <script>
        const imageInput = document.getElementById('imageInput');
        const widthInput = document.getElementById('widthInput');
        const heightInput = document.getElementById('heightInput');
        const qualityInput = document.getElementById('qualityInput');
        const previewImg = document.getElementById('previewImg');
        const downloadLink = document.getElementById('downloadLink');
        const qualityVal = document.getElementById('qualityVal');
        
        let originalImage = new Image();
        let originalWidth = 0;
        let originalHeight = 0;

        // X·ª≠ l√Ω khi ch·ªçn ·∫£nh
        imageInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    originalImage.src = event.target.result;
                    originalImage.onload = function() {
                        originalWidth = originalImage.width;
                        originalHeight = originalImage.height;
                        
                        // Hi·ªÉn th·ªã th√¥ng s·ªë g·ªëc
                        widthInput.value = originalWidth;
                        heightInput.value = originalHeight;
                        
                        // Hi·ªán ·∫£nh g·ªëc
                        previewImg.src = originalImage.src;
                        previewImg.style.display = 'block';
                        document.getElementById('placeholderText').style.display = 'none';
                        downloadLink.style.display = 'none'; // ·∫®n n√∫t t·∫£i c≈© ƒëi
                    }
                }
                reader.readAsDataURL(file);
            }
        });

        // T·ª± ƒë·ªông t√≠nh chi·ªÅu cao khi nh·∫≠p chi·ªÅu r·ªông (Gi·ªØ t·ªâ l·ªá)
        widthInput.addEventListener('input', function() {
            if (originalWidth > 0) {
                const ratio = originalHeight / originalWidth;
                heightInput.value = Math.round(this.value * ratio);
            }
        });

        // Hi·ªÉn th·ªã % ch·∫•t l∆∞·ª£ng
        qualityInput.addEventListener('input', function() {
            qualityVal.innerText = Math.round(this.value * 100) + "%";
        });

        function resizeImage() {
            if (!originalImage.src) {
                alert("Vui l√≤ng ch·ªçn ·∫£nh tr∆∞·ªõc!");
                return;
            }

            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');

            const newWidth = parseInt(widthInput.value);
            const newHeight = parseInt(heightInput.value);
            const quality = parseFloat(qualityInput.value);

            canvas.width = newWidth;
            canvas.height = newHeight;

            // V·∫Ω ·∫£nh l√™n canvas v·ªõi k√≠ch th∆∞·ªõc m·ªõi
            ctx.drawImage(originalImage, 0, 0, newWidth, newHeight);

            // Xu·∫•t ·∫£nh ra DataURL
            const dataUrl = canvas.toDataURL('image/jpeg', quality);
            
            // C·∫≠p nh·∫≠t giao di·ªán
            previewImg.src = dataUrl;
            
            // C·∫≠p nh·∫≠t n√∫t Download
            downloadLink.href = dataUrl;
            downloadLink.download = 'anh-da-resize.jpg';
            downloadLink.style.display = 'block';
            downloadLink.innerText = "‚¨á T·∫¢I V·ªÄ (" + newWidth + "x" + newHeight + ")";
            
            document.getElementById('sizeInfo').innerText = "ƒê√£ resize xong! Nh·∫•n n√∫t t·∫£i v·ªÅ b√™n d∆∞·ªõi.";
        }
    </script>
</body>
</html>
